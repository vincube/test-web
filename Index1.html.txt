<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <style>
    #salesFilters { margin-top: 10px; }
    #salesData { white-space: pre-wrap; border: 1px solid #ccc; padding: 10px; }
  </style>
  <script>
    function onLoad() {
      document.getElementById('sellType').value = '4';
      fetchSales();
    }

    function toggleFilters() {
      var filters = document.getElementById('salesFilters');
      filters.style.display = filters.style.display === 'block' ? 'none' : 'block';
    }

    function fetchSales() {
      var sellType = document.getElementById('sellType').value;
      var isReturn = document.getElementById('isReturn').checked;
      document.getElementById('salesData').innerText = 'Loading...';
      google.script.run.withSuccessHandler(function(data) {
        document.getElementById('salesData').innerText = data;
      }).getSalesData(sellType, isReturn);
    }
  </script>
</head>
<body onload="onLoad()">
  <button onclick="toggleFilters();">Sales</button>
  <div id="salesFilters" style="display:none;">
    <label for="sellType">Тип продажи:</label>
    <select id="sellType" onchange="fetchSales();">
      <option value="1">1 - продажа за нал</option>
      <option value="2">2 - продажа за безнал</option>
      <option value="3">3 - продажа за внешний кредит</option>
      <option value="4">4 - продажа за бонусы</option>
      <option value="99">99 - неудачная продажа</option>
    </select>
    <label>
      <input type="checkbox" id="isReturn" onchange="fetchSales();">
      Возврат (IsReturn)
    </label>
  </div>
  <div id="salesData"></div>
</body>
</html>
